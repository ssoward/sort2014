<!DOCTYPE html><!--[if lt IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"></html><![endif]--><!--[if IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8"></html><![endif]--><!--[if IE 8]><html lang="en" class="no-js lt-ie9"></html><![endif]--><!--[if gt IE 8]><!-->
<html lang="en" class="no-js" xmlns="http://www.w3.org/1999/html"><!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>AngularJS</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=1024, user-scalable=no"><!-- Required stylesheets-->
    <link rel="stylesheet" href="css/bootstrap.css.min.css"><!-- Modernizr.-->
    <link rel="stylesheet" href="js/core/deck.core.css"><!-- Starter kit custom styles.-->
    <link rel="stylesheet" href="css/slides.custom.css"><!-- Extension CSS files go here. Remove or add as needed.-->
    <link rel="stylesheet" href="js/extensions/notes/deck.notes.css">
    <link rel="stylesheet" href="js/extensions/presenterview/deck.presenterview.css">
    <link rel="stylesheet" href="js/extensions/goto/deck.goto.css">
    <link rel="stylesheet" href="js/extensions/menu/deck.menu.css">
    <link rel="stylesheet" href="js/extensions/navigation/deck.navigation.css">
    <link rel="stylesheet" href="js/extensions/status/deck.status.css">
    <link rel="stylesheet" href="js/extensions/hash/deck.hash.css">
    <link rel="stylesheet" href="js/extensions/scale/deck.scale.css">
    <!-- Style theme. More available in /themes/style/ or create your own.--><!--link(rel="stylesheet", href="themes/style/swiss.css")--><!-- Transition. More available in /themes/transition/ or create your own.-->
    <link rel="stylesheet" href="js/themes/transition/horizontal-slide.css"><!-- Plugin: CodeMirror-->
    <link rel="stylesheet" href="js/plugins/codemirror/deck.codemirror.css">
    <link rel="stylesheet" href="js/plugins/codemirror/themes/elegant.css"><!-- Modernizr.-->
    <script src="js/vendor/modernizr.custom.js"></script>
    <style>
        .popquiz{
            color: #111;
        }
        .img_width{
            width: 75%;
        }
        .figure{
            height: 100%;
        }
    </style>
</head>
<body class="body">
<div class="deck-container">

<section id="a" class="slide">
    <!--
        <ul>
        <li>Welcome to our presentation</li>
        <li>Who we are</li>
        <li>Educational to understand better the tools that we've used</li>
        <li>Fell free to ask questions</li>
        </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="Angular Shield" />AngularJS Promises <span>Sequential Async</span></h2>
    <div style="position: absolute; bottom: 2em; right: 2em; text-align: right" class="presenters col-md-10 col-md-offset-1">
        <p>Scott <span class="twitterHandle">@scottlsoward</p>
        <p>Nils <span class="twitterHandle">@nilsynils</p>
        <p>http://ssoward.github.io/sort2014</p>
    </div>
</section>

<section id="b" class="slide">
    <!--
    <ul>
    <li>Don't waste your time!</li>
    <li>In order to talk about promises we need to review browser and ajax</li>
    </ul>
    -->
    <h2>What's in store</h2>
    <div class="col-md-10 col-md-offset-1">
        <ul class="boxSet row">
            <li class="col-md-3">Browser<br /><img src="images/browser.png" alt="browser"></li>
            <li class="col-md-3">AJAX<br /><img src="images/ajax.png" alt="ajax"></li>
            <li class="col-md-3">Promise<br /><img src="images/promises.png" alt="promises"></li>
            <li class="col-md-3">AngularJS<br /><img src="images/AngularJS-Shield-small.png" alt="angularJS"></li>
        </ul>
    </div>
    <div class="shield"></div>
</section>

<section id="c" class="slide">
    <!--
    <ul>
        <li>JavaScript engines only have a single thread</li>
        <li>JavaScript can only ever execute one piece of code at a time</li>
        <li>Tasks live on queue and are completed sequentially</li>
        <li>Asynchronous events are put in a queue and wait for execution</li>
    </ul>
    -->

    <h2><img src="images/browser.png" alt="browser">One Thread</h2>
    <div class="shield"></div>
</section>

<section id="d" class="slide">
    <!--
    <ul>
        <li>Secrets of the JavaScript Ninja - John Resig</li>
        <li>Browser event loop is single-threaded</li>
        <li>Events are placed into the event queue</li>
        <li>Network Events can be ajax calls</li>
        <li>Events are handled in the order that its placed onto the queue</li>
        <li>FIFO: first in first out</li>
        <li>"Under no circumstances are two handlers executing simultaneously in separate threads"</li>
    </ul>
    -->

    <h2><img src="images/browser.png" alt="browser">Event Loop</h2>
    <section class="col-md-6 col-md-offset-3 ccontainer">
        <img src="images/browser-event-loop.svg" alt="Browser Event Loop" class="top" />
        <!-- <img class="img_width" src="images/singleThread.png"/> -->
    </section>
</section>

<section id="e" class="slide">
    <!--
    <ul>
        <li>Callback function is also known as a callback pattern</li>
        <li>Callback functions are derived from a programming paradigm called functional programming</li>
        <li>Functional programming is the use of functions as arguments</li>
        <li>JavaScript functions are first-class objects and can be passed as arguments to functions</li>
        <li>This is my "explain to a 6 year old" callbacks:</li>
        <li>Iphone assembly line worker: receives instructions on what to do after he is done.</li>
        <li>Do BatteryDude Demo</li>
    </ul>
    -->
    <h2><img src="images/browser.png" alt="browser">Functions: First Class Objects</h2>
    <section>
        <div class="col-md-10 col-md-offset-1">
            <!--<div data-height="479" data-theme-id="9061" data-slug-hash="GmcvK" data-default-tab="js" data-user="nilsynils" class='codepen'>
                <pre>
                    <code>
                        function buttonClick(){
                          console.log(&#x27;hello, click event&#x27;);
                          functionWhichTakesFunctionAsArgument(callback);
                        }

                        var callback = function(data){
                          console.log(&#x27;callback time! &#x27;+data);
                        };

                        function functionWhichTakesFunctionAsArgument(callback){
                          console.log(&#x27;first function execution&#x27;);
                          //... do something
                          var response = Math.random();
                          callback(response);
                        };

                </pre>
                <p>See the Pen <a href='http://codepen.io/nilsynils/pen/GmcvK/'>GmcvK</a> by Nils Rasmusson (<a href='http://codepen.io/nilsynils'>@nilsynils</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
            </div>
            <script async src="http://codepen.io/assets/embed/ei.js"></script>-->
            <img class="img_width" src="images/callback.png"/>
        </div>
    </section>
</section>

<section id="f" class="slide">
    <!--
    <ul>
        <li>AJAX = Asynchronous JavaScript and XML</li>
    </ul>
    -->
    <h2><img src="images/ajax.png" alt="ajax">Callbacks - AJAX</h2>
    <section>
        <ul class="col-md-2" style="font-size: 0.7em; list-style: none">
            <li><a class="btn btn-primary" onclick="foxconn()">Call me back</a></li>
            <li><div id="callback21"></div> </li>
            <li><div id="callback22"></div> </li>
            <li><div id="callback23"></div> </li>
        </ul>
        <div class="col-md-9">
            <div class="figure">
                <img class="img_width" src="images/callback2.png"/>
            </div>
        </div>
    </section>
</section>

<section id="g" class="slide">
    <!--
    <ul>
        <li>You Ugly!</li>
        <li>This is raw AJAX</li>
        <li>Old school way of interacting with the windows XMLHttpRequest object</li>
        <li>Callback function is the onreadystatechange and when the request comes back, we can update the div</li>
    </ul>
    -->
    <h2><img src="images/ajax.png" alt="ajax">AJAX</h2>
    <div class="col-md-3">
        <a class="btn btn-primary" onclick="loadXMLDoc('ajaxDiv')">Call me back</a>
        <div id="ajaxDiv"></div>
    </div>
    <div class="col-md-9">
        <div class="figure">
            <img class="img_width" src="images/ajaxOldSchool.png"/>
        </div>
    </div>
</section>

<section id="i" class="slide">
    <!--
    <ul>
        <li>Enforcing Synchronized Asynchronous calls</li>
        <li>nest7 will not occur before the previous AJAX calls</li>
    </ul>
    -->
    <h2><img src="images/ajax.png" alt="ajax">Nesting</h2>
    <div class="col-md-10 col-md-offset-1">
        <div class="figure">
            <img class="img_width" src="images/ajaxNesting.png"/>
        </div>
    </div>
</section>

<section id="k" class="slide">
    <!--
    <ul>
        <li> A promise represents the eventual result of an asynchronous operation.</li>
        <li> The primary way of interacting with a promise is through its then method</li>
        <li> The then method registers callbacks to receive either a promise’s eventual value or the reason why the promise cannot be fulfilled.</li>
        <li> www.promisesaplus.com Promises/A+ : An open standard for sound, interoperable JavaScript promises</li>
    </ul>
    -->
    <h2><img src="images/promises.png" alt="promises">Promises</h2>
    <div class="col-md-10 col-md-offset-1">
        <div class="figure">
            <img src="images/promise-def.png" alt="promises noun" class="col-md-6">
            <p class="col-md-6">A promise represents the eventual result of an asynchronous operation.
                <br /><br />
                <a class="img_width" target="_blank" href="http://promisesaplus.com/#point-2">Promises/A+</a>
                <script type="text/javascript">
                    function playSound(el,soundfile) {
                        if (el.mp3) {
                            if(el.mp3.paused) el.mp3.play();
                            else el.mp3.pause();
                        } else {
                            el.mp3 = new Audio(soundfile);
                            el.mp3.play();
                        }
                    }
                </script>
		    	<span id="dummy" onclick="playSound(this, 'audio/promises-mix.mp3');">
			    	<img src="images/icon-headphones.png" alt="Play Me Some Promises!">
			    </span>
            </p>
        </div>
    </div>
</section>

<section id="l" class="slide">
    <!--
    <ul>
         <li> <b>promise   </b>is an object/function with a <em>then</em> method</li>
         <li> <b>thenable  </b>is an object/function that defines a <em>then</em> method</li>
         <li> <b>value     </b>is any legal JavaScript value (<em>undefined, thenable, promise</em>, etc)</li>
         <li> <b>exception </b>is a value that is thrown using the <em>throw</em> statement</li>
         <li> <b>reason    </b>is a value that indicates why a promise was rejected</li>
    </ul>
    -->
    <h2><img src="images/promises.png" alt="promises">Terminology</h2>
    <div class="col-md-10 col-md-offset-1">
        <div class="figure explanation">
            <ul>
                <li><strong><em>promise</em></strong> - object/function with a <em>then</em> method</li>
                <li><strong><em>thenable</em></strong> - object/function defining <em>then</em> method</li>
                <li><strong><em>value</em></strong> - any legal JS value.</li>
                <li><strong><em>exception</em></strong> - value thrown using <em>throw</em> statement</li>
                <li><strong><em>reason</em></strong> - value indicating why promise was rejected</li>
            </ul>
        </div>
    </div>
</section>

<section id="m" class="slide">
    <!--
     <ul>
        <li><strong><em>Pending</em></strong>: transition to either the fulfilled or rejected state</li>
        <li><strong><em>Fulfilled</em></strong>: must not transition to any other state.
                    must have a value, which must not change</li>
        <li><strong><em>Rejected</em></strong>: must not transition to any other state.
                    must have a reason, which must not change.</li>
     </ul>
    -->
    <h2><img src="images/promises.png" alt="promises">Three States</h2>
    <div class="col-md-10 col-md-offset-1">
        <div class="figure explanation">
            <ul>
                <li><em><strong>pending   </strong></em>: initial state, not fulfilled or rejected.</li>
                <li><em><strong>fulfilled </strong></em>: successful operation</li>
                <li><em><strong>rejected  </strong></em>: failed operation.</li>
            </ul>
        </div>
    </div>
</section>

<section id="n" class="slide">
    <!--
    <ul>
        <li>This is a contrived example of how the promise works</li>
        <li>The return of this function is an object with the function named THEN</li>
        <li>the batteryDude calls a service via AJAX</li>
        <li>the return of the batteryDude is an object with a then function</li>
        <li>the then function takes in a function as its input</li>
        <li>the then function executes the input function with the AJAX result as the value</li>
        <li>notice the similarities between the callback model and promise model</li>
    </ul>
    -->
    <h2><img src="images/promises.png" alt="promises">Promise</h2>
    <div class="col-md-10 col-md-offset-1">
        <div class="figure">
            <img class="img_width" src="images/promise.png"/>
        </div>
    </div>
</section>

<section id="o" class="slide" ng-app="myApp">
    <!--
     <ul class="">
        <li>Facilitates communication with the remote HTTP servers via the browser's XMLHttpRequest object.</li>
        <li>HTTP is a function which takes a single argument — a configuration object — </li>
        <li>The configuration object is used to generate an HTTP request and returns a promise with two $http specific methods: success and error.</li>
     </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">AngularJS - $http</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/http.png"/>
    </div>
</section>

<section id="o1" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>AngularJS code for $http</li>
        <li>Notice: it creates a promise with $q that we'll talk about </li>
        <li>It creates a success method</li>
        <li>And it creates an error method</li>
        <li>misspelling of unnecessary</li>
    </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS"> $http</h2>
    <div class="col-md-10 col-md-offset-1">
        <div class="figure">
            <p data-height="557" data-theme-id="9151" data-slug-hash="ljrKG" data-default-tab="js" data-user="ssoward" class='codepen'>See the Pen <a href='http://codepen.io/ssoward/pen/ljrKG/'>ljrKG</a> by scott (<a href='http://codepen.io/ssoward'>@ssoward</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
            <script async src="http://codepen.io/assets/embed/ei.js"></script>
        </div>
    </div>
</section>

<section id="o3" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>$http</li>
      <li>http method takes as its input the configuration object</li>
      <li>the canRappel method returns a success and error</li>
  </ul>
  -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS"> $http</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/canRappel.png"/>
        <div class="figure">

        </div>
    </div>
</section>

<section id="os" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Move our $http call to a service.js</li>
      <li>And the canRappel from the service js does the same thing</li>
  </ul>
  -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS"> $http</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/canRappelService.png"/>
        <div class="figure">

        </div>
    </div>
</section>

<section id="ot" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Using the THEN method</li>
      <li>Not only do we get the success and error methods</li>
      <li>but because the return object from $http is a promise we have a then method</li>
  </ul>
  -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS"> $http</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/canRappelThen.png"/>
        <div class="figure">

        </div>
    </div>
</section>

<section id="o2" class="slide" ng-app="myApp">
    <!--
     <ul>
          <li>1. Harness</li>
          <li>2. Anchor Rope</li>
          <li>3. Rope/Harness</li>
          <li>4. Rappel On</li>
          <li>APP</li>
     </ul>
     -->
    <div class="shield"></div>
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">Mountaineering</h2>
    <div class="col-md-10 col-md-offset-1">
        <a target="_blank" href="../app">App</a>
    </div>
</section>

<section id="oc" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Embedding 'then' methods</li>
      <li>Because each method returns a promise, we can attach a .then()</li>
      <li>In real situation you would most likely be using the result value within the embedded callback</li>
      <li>Achieving sequential async</li>
  </ul>
  -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">$http</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/canRappelChainThen.png"/>
        <div class="figure">

        </div>
    </div>
</section>

<section id="ote" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Embedding with Error handling</li>
  </ul>
  -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS"> $http</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/canRappelChainError.png"/>
        <div class="figure">

        </div>
    </div>
</section>

<section id="otr" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Chaining with Try/Catch</li>
  </ul>
  -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">$http</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/canRappelChainTry.png"/>
        <div class="figure">

        </div>
    </div>
</section>

<section id="p" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>Chaining then simplified with error handling in the service class</li>
        <li>One gotcha: if your chaing is broken, be sure that you are returning a promise</li>
        <li>promises can mitigate the “Pyramid of Doom”: the situation where code marches to the right faster than it marches forward.</li>
    </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">Chaining</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/canRappelChaining.png"/>
        <div class="figure">
        </div>
    </div>
</section>

<section id="q" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>A promise / deferred implementation inspired by Kris Kowal's <a target="_blank" href="https://github.com/kriskowal/q">Q</a>.</li>
    </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">$q</h2>
    <div>
        <p>A promise / deferred implementation inspired by Kris Kowal's <a target="_blank" href="https://github.com/kriskowal/q">Q</a>.</p>
    </div>
    <div class="figure">
        <img style="height: 500px" src="images/onion.jpg"/>
    </div>
</section>

<section id="q1" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>The purpose of the deferred object is to expose the Promise instance as well as APIs for signaling; successful, unsuccessful, as well as the status of the task.</li>
        <li>Methods Of Deferred:</li>
            <ol>
                <li>resolve(value) – resolves the derived promise with the value. </li>
                <li>reject(reason) – rejects the derived promise with the reason. </li>
                <li>notify(value) - provides updates on the status of the promise's execution. This may be called multiple times before the promise is either resolved or rejected.</li>
             </ol>
    </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">The Deferred API</h2>
    <div class="col-md-2 col-md-offset-1">
        <p>$q.defer()</p>
    </div>
    <div class="col-md-8" style="padding-top: 2em">
        <div class="figure">
            <ol>
                <li>resolve(value) – resolves the derived promise with the value. </li>
                <li>reject(reason) – rejects the derived promise with the reason. </li>
                <li>notify(value) - provides updates on the status of the promise's execution. This may be called multiple times before the promise is either resolved or rejected.</li>
            </ol>
        </div>
    </div>
</section>

<section id="q3" class="slide" ng-app="myApp">
    <!--
     <ul>
                <li><p><span class="kwd">then</span><span class="pun">(</span><span class="pln">successCallback</span><span class="pun">,</span><span class="pln"> errorCallback</span><span class="pun">,</span><span class="pln"> notifyCallback</span><span class="pun">)</span> – regardless of when the promise was or
                    will be resolved or rejected, <span class="kwd">then</span> calls one of the success or error callbacks asynchronously
                    as soon as the result is available. The callbacks are called with a single argument: the result
                    or rejection reason. </p>
                </li>
                <li><p><span class="kwd">catch</span><span class="pun">(</span><span class="pln">errorCallback</span><span class="pun">)</span> – shorthand for <span class="pln">promise</span><span class="pun">.</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> errorCallback</span><span class="pun">)</span></p>
                </li>
                <li><p><span class="kwd">finally</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">)</span> – allows you to observe either the fulfillment or rejection of a promise,
                    but to do so without modifying the final value. This is useful to release resources or do some
                    clean-up that needs to be done whether the promise was rejected or resolved. See the <a href="https://github.com/kriskowal/q/wiki/API-Reference#promisefinallycallback">full
                        specification</a> for
                    more information.</p>
                </li>
            </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">The Promise API</h2>
    <div class="col-md-2 col-md-offset-1">
        <p>$q.defer().promise</p>
    </div>
    <div class="col-md-8" style="padding-top: 2em">
        <div class="figure">
            <ol>
                <li>
                    <p><span class="kwd">then</span><span class="pun">(</span><span class="pln">successCallback</span><span class="pun">,</span><span class="pln"> errorCallback</span><span class="pun">,</span><span class="pln"> notifyCallback</span><span class="pun">)</span>
                        calls one of the success or error callbacks asynchronously as soon as the result is available.</p>
                </li>
                <li><p><span class="kwd">catch</span><span class="pun">(</span><span class="pln">errorCallback</span><span class="pun">)</span> – shorthand for <span class="pln">promise</span><span class="pun">.</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> errorCallback</span><span class="pun">)</span></p>
                </li>
                <li><p><span class="kwd">finally</span><span class="pun">(</span><span class="pln">callback</span><span class="pun">)</span>
                    – allows you to observe either the fulfillment or rejection of a promise.</p>
                </li>
            </ol>
        </div>
    </div>
</section>

<section id="q2" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>Simple $q method that replaces 'Nils' with 'Scott'</li>
        <li>input value is valid: resolve is called, else reject</li>
        <li>Returns a promise</li>
    </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">$q</h2>
    <div class="col-md-2 col-md-offset-1">
    </div>
    <div class="col-md-8">
        <div class="figure">
            <img class="img_width" src="images/q.png"/>
        </div>
    </div>
</section>


<section id="qp" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>$q deferred.promise</li>
    </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">$q</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/canRappelQ.png"/>
        <div class="figure">
        </div>
    </div>
</section>

<section id="qa" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>$q.all(...) we can all multiple promises to $q and run them.</li>
    </ul>
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">$q.all()</h2>
    <div class="col-md-10 col-md-offset-1">
        <img class="img_width" src="images/canRappelQAll.png"/>
        <div class="figure">
        </div>
    </div>
</section>

<section id="r" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>JavaScript functions can be passed as arguments to functions</li>
        <li>Callbacks: functions that are run after AJAX returns</li>
        <li>Promises the eventual result of an AJAX operation</li>
        <li>Promises are accessed by '.then' function</li>
        <li>$http returns a promise and provides success and error methods</li>
        <li>$q.defer() has API and exposes promise API. $q.all()</li>
        <li>$q.all()</li>
    </ul>
    -->
    <div class="shield"></div>

    <h2>Take Aways</h2>
    <ul class="darkbg" style="background-color: rgba(0,0,0,0.5); list-style: none; padding: 1em; border-radius: 10px">
        <li>JavaScript functions can be passed as arguments to functions</li>
        <li>Callbacks: functions that are run after AJAX returns</li>
        <li>Promises the eventual result of an AJAX operation</li>
        <li>Promises are accessed by '.then' function</li>
        <li>$http returns a promise and provides success and error methods</li>
        <li>$q has API and exposes promise API</li>
        <li>$q.all()</li>
    </ul>
</section>

<section id="r1" class="slide" ng-app="myApp">
    <!--
    -->
    <h2>Questions?</h2>
</section>

<section id="s" class="slide" ng-app="myApp">
    <!--
    -->
    <h2><img src="images/AngularJS-Shield-small.png" alt="angularJS">Jam on it!</h2>
    <div class="col-md-10 col-md-offset-1">
        <div class="figure">
        </div>
    </div>
</section>




<!-- deck.navigation snippet-->
<a target="_blank" href="#" title="Previous" class="deck-prev-link">&#8592;</a>
<a target="_blank" href="#" title="Next" class="deck-next-link">&#8594;</a>
<!-- deck.status snippet-->
<p class="deck-status">
    <span class="deck-status-current"></span>/<span class="deck-status-total"></span></p>
<!-- deck.goto snippet-->
<form action="" method="get" class="goto-form">
    <label for="goto-slide">Go to slide:</label>
    <input id="goto-slide" type="text" name="slidenum" list="goto-datalist">
    <datalist id="goto-datalist"></datalist>
    <input type="submit" value="Go">
</form>
<!--deck.hash snippet-->
<a target="_blank" href="" title="Permalink to this slide" class="deck-permalink">#</a>
<div class="shield"></div>
</div>

<!-- Required JS files.-->
<script src="js/vendor/jquery-1.8.2.min.js"></script>
<script src="js/vendor/coffee-script-1.4.0.min.js"></script>
<script src="js/core/deck.core.js"></script>
<!-- Plugin: CodeMirror (with CoffeeScript enhancements).-->
<script src="js/plugins/codemirror/codemirror.js"></script>
<script src="js/plugins/codemirror/mode/javascript/javascript.js"></script>
<script src="js/plugins/codemirror/mode/coffeescript/coffeescript.js"></script>
<script src="js/plugins/codemirror/deck.codemirror.js"></script>
<!-- Extensiojs/n JS files. Add or remove as needed.-->
<script src="js/extensions/hash/deck.hash.js"></script>
<script src="js/extensions/menu/deck.menu.js"></script>
<script src="js/extensions/goto/deck.goto.js"></script>
<script src="js/extensions/status/deck.status.js"></script>
<script src="js/extensions/navigation/deck.navigation.js"></script>
<!-- <script src="js/extensions/scale/deck.scale.js"></script>
 --><script src="js/extensions/clone/deck.clone.js"></script>
<script src="js/extensions/presenterview/deck.presenterview.js"></script>
<script src="js/extensions/hash/deck.hash.js"></script>
<!--
<script src="extensions/notes/deck.notes.js"></script>
<script src="extensions/notes/deck.scottsNotes.js"></script>
-->
<!-- Initialize the deck.-->
<script>$(function() {
    $.deck('.slide', {
        codemirror: {
            lineNumbers: true,
            theme: "elegant",
            indentUnit: 2,
            indentWithTabs: false,
            runnable: false
        }
    });
});
</script>
<script>
    $(".popquiz").mouseover(function(){
        $(this).css("color", "white");
    });
    $(".popquiz").mouseout(function(){
        $(this).css("color", "#111");
    });

    function consoleLogAdd(divVal, log){
        var ele = document.getElementById(divVal);
        var currVal = ele.innerHTML;
        ele.innerHTML = currVal + log+'</br>';
    }

    function consoleLog(divVal, log){
        var ele = document.getElementById(divVal);
        ele.innerHTML = log+'</br>';
    }


    // Callbacks

    var nextStep = function(param1){
        console.log(5 + param1);
    };

    //input param is a function
    //	function batteryDude(doWhenDone){
    //		//... do something
    //		var iPhone = Math.random();
    //        doWhenDone(iPhone);
    //	}
    //iphone boss
    //    batteryDude(nextStep);



    // AJAX


    var callMeAfter = function(data){
//		console.log(data);
        consoleLogAdd('callback23', data);
    };

    function batteryDude(runWhenDone){
        //... do something that creates delay (AJAX-esk)
        setTimeout(function(){
            var iPhone = Math.random();
            runWhenDone(iPhone);
        }, 3000);
    }

    function foxconn() {
//		console.log('Start');
        consoleLogAdd('callback21', 'Start');
        batteryDude(callMeAfter);
        consoleLogAdd('callback22', 'No Blocking!!');
//        console.log('No Blocking!!');
    }




    function loadXMLDoc(someDiv, callback){
        var xmlhttp;
        if (window.XMLHttpRequest){
            xmlhttp=new XMLHttpRequest();
        }
        else{
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function(){
            if (xmlhttp.readyState==4 && xmlhttp.status==200){
                document.getElementById(someDiv).innerHTML=xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","/ajax/test?val="+someDiv,false);
        xmlhttp.send();
        if(callback) {
            callback(null, xmlhttp.responseText);
        }
        return xmlhttp.responseText;
    }

    function nestedMethod(){
        loadXMLDoc('nest1', function(result){
            loadXMLDoc('nest2', function(result){
                loadXMLDoc('nest3', function(result){
                    loadXMLDoc('nest4', function(result){
                        loadXMLDoc('nest5', function(result){
                            loadXMLDoc('nest6', function(result){
                                loadXMLDoc('nest7', function(result){
                                });
                            });
                        });
                    });
                });
            });
        });
    };

    //	function batteryDude(){
    //		var iphone = assembleBattery();
    //		return {
    //			then: function(nextStep) {
    //				if (nextStep) {
    //                    nextStep(iphone);
    //				}
    //			}
    //		};
    //	}
    //
    //	function foxconn() {
    //		var promise = batteryDude();
    //
    //		promise.then(function(res){
    //			console.log(res);
    //		});
    //	}

</script>


<!-- APP SCRIPT -->
<script src="../app/lib/angular/angular.js"></script>
<script src="../app/lib/angular/angular-animate.js"></script>
<script src="../app/lib/angular/angular-ui-router.js"></script>
<script src="../app/lib/angular/angular-route.js"></script>
<script src="../app/lib/angular/ui-bootstrap-tpls.js"></script>
<script src="../app/js/app.js"></script>
<script src="../app/js/SortAppRoute.js"></script>
<script src="../app/js/services/HomeService.js"></script>
<script src="../app/js/controllers/HomeController.js"></script>
<script src="../app/js/controllers/AdminController.js"></script>

<!-- APP SCRIPT -->


</body>
</html>
