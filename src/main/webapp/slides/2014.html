<!DOCTYPE html><!--[if lt IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"></html><![endif]--><!--[if IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8"></html><![endif]--><!--[if IE 8]><html lang="en" class="no-js lt-ie9"></html><![endif]--><!--[if gt IE 8]><!-->
<html lang="en" class="no-js" xmlns="http://www.w3.org/1999/html"><!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>AngularJS</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=1024, user-scalable=no"><!-- Required stylesheets-->
    <link rel="stylesheet" href="js/core/deck.core.css"><!-- Starter kit custom styles.-->
    <link rel="stylesheet" href="css/slides.custom.css"><!-- Extension CSS files go here. Remove or add as needed.-->
    <link rel="stylesheet" href="js/extensions/notes/deck.notes.css">
    <link rel="stylesheet" href="js/extensions/presenterview/deck.presenterview.css">
    <link rel="stylesheet" href="js/extensions/goto/deck.goto.css">
    <link rel="stylesheet" href="js/extensions/menu/deck.menu.css">
    <link rel="stylesheet" href="js/extensions/navigation/deck.navigation.css">
    <link rel="stylesheet" href="js/extensions/status/deck.status.css">
    <link rel="stylesheet" href="js/extensions/hash/deck.hash.css">
    <link rel="stylesheet" href="js/extensions/scale/deck.scale.css"><!-- Style theme. More available in /themes/style/ or create your own.--><!--link(rel="stylesheet", href="themes/style/swiss.css")--><!-- Transition. More available in /themes/transition/ or create your own.-->
    <link rel="stylesheet" href="js/themes/transition/horizontal-slide.css"><!-- Plugin: CodeMirror-->
    <link rel="stylesheet" href="js/plugins/codemirror/deck.codemirror.css">
    <link rel="stylesheet" href="js/plugins/codemirror/themes/elegant.css"><!-- Modernizr.-->
    <link rel="stylesheet" href="css/bootstrap.css.min.css"><!-- Modernizr.-->
    <script src="js/vendor/modernizr.custom.js"></script>
    <style>
        .popquiz{
            color: #111;
        }
        .img_width{
            /*width: 600px;*/
        }
        .figure{
            height: 100%;
        }
    </style>
</head>
<body class="body">
<div class="deck-container">

<section id="a" class="slide">
    <h2><img src="images/AngularJS-Shield-small.png" alt="Angular Shield" />AngularJS Promises <span>Sequential Async</span></h2>
</section>

<section id="b" class="slide">
    <!--
  <ul>
       <li>Browser</li>
       <li>AJAX</li>
       <li>Promise</li>
       <li>AngularJS</li>
  </ul>
  -->
    <h2>What's in store</h2>
    <div class="col-md-10 col-md-offset-1">
        <ul>
            <li>Browser</li>
            <li>AJAX</li>
            <li>Promise</li>
            <li>AngularJS</li>
        </ul>
    </div>
    <div class="presenters">
        <p>Scott <span class="twitterHandle">@scottlsoward</p>
        <p>Nils <span class="twitterHandle">@nilsynils</p>
        <p>http://ssoward.github.io/sort2014</p>
    </div>
    <div class="shield"></div>
</section>

<section id="c" class="slide">
    <!--
    <ul>
        <li>JavaScript engines only have a single thread</li>
        <li>JavaScript can only ever execute one piece of code at a time</li>
        <li>Tasks live on queue and are completed sequentially</li>
        <li>Asynchronous events are put in a queue and wait for execution</li>
    </ul>
    -->

    <h2>One Thread</h2>
    <div class="shield"></div>
</section>

<section id="d" class="slide">
    <!--
    <ul>
        <li>Secrets of the JavaScript Ninja - John Resig</li>
        <li>Browser event loop is single-threaded</li>
        <li>Events are placed into the event queue</li>
        <li>Events are handled in the order that its placed onto the queue</li>
        <li>FIFO: first in first out</li>
        <li>"Under no circumstances are two handlers executing simultaneously in separate threads"</li>
    </ul>
    -->

    <h2>Event Loop</h2>
    <section class="col-md-10 col-md-offset-1">
        <img src="images/browser-event-loop.svg" alt="Browser Event Loop" style="height: 60%;" />
        <!-- <img class="img_width" src="images/singleThread.png"/> -->
    </section>
</section>

<section id="e" class="slide">
    <!--
    <ul>
        <li>Callback function is also known as a callback pattern</li>
        <li>Callback functions are derived from a programming paradigm called functional programming</li>
        <li>Functional programming is the use of functions as arguments</li>
        <li>JavaScript functions are first-class objects and can be passed as arguments to functions</li>
    </ul>
    -->
    <h2>Callbacks</h2>
    <section>
        <div class="col-md-10 col-md-offset-1">
            <div data-height="479" data-theme-id="9061" data-slug-hash="GmcvK" data-default-tab="js" data-user="nilsynils" class='codepen'>
                <pre>
                    <code>
                        function buttonClick(){
                        console.log(&#x27;hello, click event&#x27;);
                        functionWhichTakesFunctionAsArgument(callback);
                        }

                        var callback = function(data){
                        console.log(&#x27;callback time! &#x27;+data);
                        };

                        function functionWhichTakesFunctionAsArgument(callback){
                        console.log(&#x27;first function execution&#x27;);
                        //... do something
                        var response = Math.random();
                        callback(response);
                        };
                    </code>
                </pre>
                <p>See the Pen <a href='http://codepen.io/nilsynils/pen/GmcvK/'>GmcvK</a> by Nils Rasmusson (<a href='http://codepen.io/nilsynils'>@nilsynils</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
            </div>
            <script async src="http://codepen.io/assets/embed/ei.js"></script>
            <div style="float: left" id="e_ajaxDiv">...</div>
            <!-- <img class="img_width" src="images/callback.png"/> -->
            <ul class="list-inline text-right">
                <li>
                    <a class="btn btn-primary" onclick="buttonClick()">Call me back</a>
                </li>
            </ul>
        </div>
    </section>
</section>

<section id="f" class="slide">
    <!--
    <ul>
        <li>AJAX = Asynchronous JavaScript and XML</li>
        <li>AJAX is the art of exchanging data with a server, and updating parts of a web page - without reloading the whole page.</li>
    </ul>
    -->
    <h2>AJAX</h2>
    <section>
        <div class="col-md-10 col-md-offset-1">
            <div data-height="450" data-theme-id="9061" data-slug-hash="DFBkp" data-default-tab="js" data-user="nilsynils" class='codepen'>
                <pre>
                    <code>
                        function buttonClick2(){
                          consoleLog(&#x27;f_ajaxDiv&#x27;, &#x27;Click event&#x27;);
                          functionWhithTakesFunctionAsArgument2(callback2);
                          consoleLogAdd(&#x27;f_ajaxDiv&#x27;, &#x27;No Blocking!!&#x27;)
                        }

                        var callback2 = function(data){
                          consoleLogAdd(&#x27;f_ajaxDiv&#x27;, &#x27;callback time! &#x27;+data);
                        };

                        function functionWhichTakesFunctionAsArgument2(someCallbackMethod){
                          consoleLogAdd(&#x27;f_ajaxDiv&#x27;, &#x27;first function execution&#x27;);
                          //... do something
                          setTimeout(function(){
                            var response = Math.random();
                            someCallbackMethod(response);
                          }, 3000);
                        };
                    </code>
                </pre>
                <p>See the Pen <a href='http://codepen.io/nilsynils/pen/DFBkp/'>DFBkp</a> by Nils Rasmusson (<a href='http://codepen.io/nilsynils'>@nilsynils</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
            </div>
            <script async src="http://codepen.io/assets/embed/ei.js"></script>
            <div class="figure">
                <div style="float: left" id="f_ajaxDiv">...</div>
<!--                 <img class="img_width" src="images/callback2.png"/>
 -->                <ul class="list-inline text-right">
                    <li><a class="btn btn-primary" onclick="buttonClick2()">Call me back</a></li>
                </ul>
            </div>
        </div>
    </section>
</section>

<section id="g" class="slide">
    <!--
    <ul>
        <li>You Ugly!</li>
    </ul>
    -->
    <h2>AJAX</h2>
    <div class="figure">
        <img class="img_width" src="images/ajaxOldSchool.png"/>
        <div id="ajaxDiv">Some Static data</div>
        <ul class="list-inline text-right">
            <li><a class="btn btn-primary" onclick="loadXMLDoc('ajaxDiv')">Call me back</a></li>
        </ul>
    </div>
</section>

<section id="i" class="slide">
    <!--
    <ul>
        <li>When se</li>
    </ul>
    -->
    <h2>Nesting</h2>
    <div class="figure">
        <img class="img_width" src="images/ajaxNesting.png"/>
    </div>
</section>

<section id="j" class="slide">
    <!--
    <ul>
        <li>When se</li>
    </ul>
    -->
    <h2>Nesting</h2>
    <div class="figure">
        <!--<img class="img_width" src="./images/ajaxNesting.png"/>-->
        <div id="nest1">div1</div>
        <div id="nest2">div2</div>
        <div id="nest3">div3</div>
        <div id="nest4">div4</div>
        <div id="nest5">div5</div>
        <div id="nest6">div6</div>
        <div id="nest7">div7</div>
        <ul class="list-inline text-right">
            <li><a class="btn btn-primary" onclick="nestedMethod()">Call me back</a></li>
        </ul>
    </div>
</section>

<section id="k" class="slide">
    <!--
    <ul>
        <li>The primary way of interacting with a promise is through its THEN method</li>
        <li>THEN registers callbacks to receive either a promise’s eventual value or the reason why the promise cannot be fulfilled.</li>
    </ul>
    -->
    <h2>Promises</h2>
    <div class="figure">
        A promise
        <a class="img_width" href="http://promisesaplus.com/#point-2">Promises/A+</a>
        represents the eventual result of an asynchronous operation.
        <div class="figure">
            <img class="img_width" src="images/promise.png"/>
            <div id="promiseDiv">Some Static data</div>
            <ul class="list-inline text-right">
                <li><a class="btn btn-primary" onclick="promise('promiseDiv')">Call me back</a></li>
            </ul>
        </div>
    </div>
</section>

<section id="l" class="slide">
    <!--
    <ul>
        <li>Angular</li>
    </ul>
    -->
    <h2>Terminology</h2>
    <div class="figure">
        <ul>
            <li>“promise” is an object/function with a then method.</li>
            <li>“thenable” is an object/function that defines a then method.</li>
            <li>“value” is any legal JavaScript value (undefined, thenable, promise, etc).</li>
            <li>“exception” is a value that is thrown using the throw statement.</li>
            <li>“reason” is a value that indicates why a promise was rejected.</li>
        </ul>
    </div>
</section>

<section id="m" class="slide">
    <!--
    <ul>
<li>A promise must be in one of three states:
<br/>pending, fulfilled, or rejected.
<li><p>When pending, a promise:
may transition to either the fulfilled or rejected state.</li>
<li><p>When fulfilled, a promise:
<br/>must not transition to any other state.
<br/>must have a value, which must not change.</li>
<li><p>When rejected, a promise:
<br/>must not transition to any other state.
<br/>must have a reason, which must not change.</li>
    </ul>
    -->
    <h2>Three States</h2>
    <div class="figure">
        <ul>
            <li>Pending: transition to either the fulfilled or rejected state</li>
            <li>Fulfilled: must not transition to any other state.
                must have a value, which must not change</li>
            <li>Rejected: must not transition to any other state.
                must have a reason, which must not change.</li>
        </ul>
    </div>
</section>

<!--<section id="n" class="slide">-->
    <!--&lt;!&ndash;-->
    <!--<ul>-->
        <!--<li>When se</li>-->
    <!--</ul>-->
    <!--&ndash;&gt;-->
    <!--<h2>Promise</h2>-->
    <!--<div class="figure">-->
        <!--<img class="img_width" src="images/promise.png"/>-->
        <!--<div id="promiseDiv">Some Static data</div>-->
        <!--<ul class="list-inline text-right">-->
            <!--<li><a class="btn btn-primary" onclick="promise('promiseDiv')">Call me back</a></li>-->
        <!--</ul>-->
    <!--</div>-->
<!--</section>-->

<section id="o1" class="slide" ng-app="myApp">
    <!--
    <ul>
         <li>http Facilitates communication with the remote HTTP servers via the browser's XMLHttpRequest object.</li>
         <li><p>A function which takes a single argument — a configuration object —
         <br/>that is used to generate an HTTP request and returns a promise with two $http specific methods: success and error.</li>
         <li><p>Since the returned value of calling the $http function is a promise, you can also use the then method to register callbacks</li>
    </ul>
    -->
    <h2>AngularJS - $http</h2>
    <div class="figure">
        <ul class="">

        </ul>
    </div>
    <img class="img_width" src="images/http.png"/>
</section>

<section id="o2" class="slide" ng-app="myApp">
    <!--
     <ul>
          <li>1. Harness</li>
          <li>2. Anchor Rope</li>
          <li>3. Rope/Harness</li>
          <li>4. Rappel On</li>
          <li>APP</li>
     </ul>
     -->
    <h2>Mountaineering</h2>
    <div class="figure">
        <ol>
            <li>Harness</li>
            <li>Anchor Rope</li>
            <li>Rope/Harness</li>
            <li>Rappel On</li>
            <li><a target="_blank" href="../app">App</a></li>
        </ol>
    </div>
    <div class="shield"></div>
</section>

<section id="o" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>$http</li>
  </ul>
  -->
    <h2>AngularJS - $http</h2>
    <img class="img_width" src="images/canRappel.png"/>
    <div class="figure">

    </div>
</section>

<section id="os" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Move our $http call to a service.js</li>
  </ul>
  -->
    <h2>AngularJS - $http</h2>
    <img class="img_width" src="images/canRappelService.png"/>
    <div class="figure">

    </div>
</section>

<section id="ot" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Using the THEN method</li>
      <li><p>Since the returned value of calling the $http function is a promise, you can also use the then method to register callbacks</li>
      <li><p>These callbacks will receive a single argument – an object representing the response. </li>
  </ul>
  -->
    <h2>AngularJS - $http</h2>
    <img class="img_width" src="images/canRappelThen.png"/>
    <div class="figure">

    </div>
</section>

<section id="oc" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Chaining 'then' methods</li>
  </ul>
  -->
    <h2>AngularJS - $http</h2>
    <img class="img_width" src="images/canRappelChainThen.png"/>
    <div class="figure">

    </div>
</section>

<section id="ote" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Chaining with Error handling</li>
  </ul>
  -->
    <h2>AngularJS - $http</h2>
    <img class="img_width" src="images/canRappelChainError.png"/>
    <div class="figure">

    </div>
</section>

<section id="otr" class="slide" ng-app="myApp">
    <!--
  <ul>
      <li>Chaining with Try/Catch</li>
  </ul>
  -->
    <h2>AngularJS - $http</h2>
    <img class="img_width" src="images/canRappelChainTry.png"/>
    <div class="figure">

    </div>
</section>

<section id="p" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>Chaining then simplified with error handling in the service class</li>
    </ul>
    -->
    <h2>Chaining</h2>
    <img class="img_width" src="images/canRappelChaining.png"/>
    <div class="figure">
    </div>
</section>

<section id="q" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>When se</li>
    </ul>
    -->
    <h2>$q</h2>
    <div class="figure">
        A promise/deferred implementation inspired by <a href="https://github.com/kriskowal/q">Kris Kowal's Q</a>.

    </div>
</section>


<section id="qp" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>$q deferred.</li>
    </ul>
    -->
    <h2>$q</h2>
    <img class="img_width" src="images/canRappelQ.png"/>
    <div class="figure">
    </div>
</section>

<section id="qa" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>$q.all(...) we can all multiple promises to $q and run them.</li>
    </ul>
    -->
    <h2>$q.all()</h2>
    <img class="img_width" src="images/canRappelQAll.png"/>
    <div class="figure">
    </div>
</section>

<section id="r" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>When se</li>
    </ul>
    -->
    <h2></h2>
    <div class="figure">
        <!--<div ui-view autoscroll="false"></div>-->
    </div>
</section>

<section id="s" class="slide" ng-app="myApp">
    <!--
    <ul>
        <li>When se</li>
    </ul>
    -->
    <h2></h2>
    <div class="figure">
        <!--<div ui-view autoscroll="false"></div>-->
    </div>
</section>













<!-- deck.navigation snippet-->
<a target="_blank" href="#" title="Previous" class="deck-prev-link">&#8592;</a>
<a target="_blank" href="#" title="Next" class="deck-next-link">&#8594;</a>
<!-- deck.status snippet-->
<p class="deck-status">
    <span class="deck-status-current"></span>/<span class="deck-status-total"></span></p>
<!-- deck.goto snippet-->
<form action="" method="get" class="goto-form">
    <label for="goto-slide">Go to slide:</label>
    <input id="goto-slide" type="text" name="slidenum" list="goto-datalist">
    <datalist id="goto-datalist"></datalist>
    <input type="submit" value="Go">
</form>
<!--deck.hash snippet-->
<a target="_blank" href="" title="Permalink to this slide" class="deck-permalink">#</a>
<div class="shield"></div>
</div>

<!-- Required JS files.-->
<script src="js/vendor/jquery-1.8.2.min.js"></script>
<script src="js/vendor/coffee-script-1.4.0.min.js"></script>
<script src="js/core/deck.core.js"></script>
<!-- Plugin: CodeMirror (with CoffeeScript enhancements).-->
<script src="js/plugins/codemirror/codemirror.js"></script>
<script src="js/plugins/codemirror/mode/javascript/javascript.js"></script>
<script src="js/plugins/codemirror/mode/coffeescript/coffeescript.js"></script>
<script src="js/plugins/codemirror/deck.codemirror.js"></script>
<!-- Extensiojs/n JS files. Add or remove as needed.-->
<script src="js/extensions/hash/deck.hash.js"></script>
<script src="js/extensions/menu/deck.menu.js"></script>
<script src="js/extensions/goto/deck.goto.js"></script>
<script src="js/extensions/status/deck.status.js"></script>
<script src="js/extensions/navigation/deck.navigation.js"></script>
<script src="js/extensions/scale/deck.scale.js"></script>
<script src="js/extensions/clone/deck.clone.js"></script>
<script src="js/extensions/presenterview/deck.presenterview.js"></script>
<script src="js/extensions/hash/deck.hash.js"></script>
<!--
<script src="extensions/notes/deck.notes.js"></script>
<script src="extensions/notes/deck.scottsNotes.js"></script>
-->
<!-- Initialize the deck.-->
<script>$(function() {
    $.deck('.slide', {
        codemirror: {
            lineNumbers: true,
            theme: "elegant",
            indentUnit: 2,
            indentWithTabs: false,
            runnable: false
        }
    });
});
</script>
<script>
    $(".popquiz").mouseover(function(){
        $(this).css("color", "white");
    });
    $(".popquiz").mouseout(function(){
        $(this).css("color", "#111");
    });

    function consoleLogAdd(divVal, log){
        var ele = document.getElementById(divVal);
        var currVal = ele.innerHTML;
        ele.innerHTML = currVal + log+'</br>';
    }

    function consoleLog(divVal, log){
        var ele = document.getElementById(divVal);
        ele.innerHTML = log+'</br>';
    }


    // Callbacks

    function buttonClick(){
        consoleLog('e_ajaxDiv', 'Click event');
        functionWhichTakesFunctionAsArgument(callback);
    }

    var callback = function(data){
        consoleLogAdd('e_ajaxDiv', 'callback time! '+data);
    };

    function functionWhichTakesFunctionAsArgument(someCallbackMethod){
        consoleLogAdd('e_ajaxDiv', 'first function execution');
        //... do something
        var response = Math.random();
        someCallbackMethod(response);
    }

    // AJAX

    function buttonClick2(){
        consoleLog('f_ajaxDiv', 'Click event');
        functionWhichTakesFunctionAsArgument2(callback2);
        consoleLogAdd('f_ajaxDiv', 'No Blocking!!')
    }

    var callback2 = function(data){
        consoleLogAdd('f_ajaxDiv', 'callback time! '+data);
    };

    function functionWhichTakesFunctionAsArgument2(someCallbackMethod){
        consoleLogAdd('f_ajaxDiv', 'first function execution');
        //... do something
        setTimeout(function(){
            var response = Math.random();
            someCallbackMethod(response);
        }, 3000);
    };


    function loadXMLDoc(someDiv, callback){
        var xmlhttp;
        if (window.XMLHttpRequest){
            xmlhttp=new XMLHttpRequest();
        }
        else{
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function(){
            if (xmlhttp.readyState==4 && xmlhttp.status==200){
                document.getElementById(someDiv).innerHTML=xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET","/ajax/test?val="+someDiv,false);
        xmlhttp.send();
        if(callback) {
            callback(null, xmlhttp.responseText);
        }
        return xmlhttp.responseText;
    }

    function nestedMethod(){
        loadXMLDoc('nest1', function(result){
            loadXMLDoc('nest2', function(result){
                loadXMLDoc('nest3', function(result){
                    loadXMLDoc('nest4', function(result){
                        loadXMLDoc('nest5', function(result){
                            loadXMLDoc('nest6', function(result){
                                loadXMLDoc('nest7', function(result){
                                });
                            });
                        });
                    });
                });
            });
        });
    };

    function loadXMLDocThen(someDiv){
        var response = loadXMLDoc(someDiv);
        return {
            then: function(callback) {
                if (callback) {
                    callback(response);
                }
            }
        };
    }

    function promise(val) {
        var promise = loadXMLDocThen(val);

        promise.then(function(res){
            console.log(res);
        });
    }



</script>


<!-- APP SCRIPT -->
<script src="../app/lib/angular/angular.js"></script>
<script src="../app/lib/angular/angular-animate.js"></script>
<script src="../app/lib/angular/angular-ui-router.js"></script>
<script src="../app/lib/angular/angular-route.js"></script>
<script src="../app/lib/angular/ui-bootstrap-tpls.js"></script>
<script src="../app/js/app.js"></script>
<script src="../app/js/SortAppRoute.js"></script>
<script src="../app/js/services/HomeService.js"></script>
<script src="../app/js/controllers/HomeController.js"></script>
<script src="../app/js/controllers/AdminController.js"></script>

<!-- APP SCRIPT -->


</body>
</html>
